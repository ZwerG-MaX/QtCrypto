# QCA OpenSSL

SET(QCA_PKCS11_SOURCES qca-pkcs11.cpp)
MY_AUTOMOC( QCA_PKCS11_SOURCES )
ADD_DEFINITIONS(-DOSSL_097)
SET(QCA_PKCS11_SOURCES ${QCA_PKCS11_SOURCES} pkcs11-helper.c)

ADD_LIBRARY(qca-pkcs11 SHARED ${QCA_PKCS11_SOURCES})
INCLUDE_DIRECTORIES(${PKCS11_INCLUDE_DIR} ${OPENSSL_INCLUDE_DIR})
TARGET_LINK_LIBRARIES(qca-pkcs11 ${QT_QTCORE_LIBRARY})
TARGET_LINK_LIBRARIES(qca-pkcs11 qca)
TARGET_LINK_LIBRARIES(qca-pkcs11 ${OPENSSL_LIBRARIES})


if(APPLE)
  TARGET_LINK_LIBRARIES(qca-pkcs11 crypto)
endif(APPLE)
IF (WIN32)
  ADD_DEFINITIONS(-DOSSL_097)
  TARGET_LINK_LIBRARIES(qca-pkcs11 gdi32)
  TARGET_LINK_LIBRARIES(qca-pkcs11 wsock32)
  TARGET_LINK_LIBRARIES(qca-pkcs11 ssleay32 libeay32)
ENDIF (WIN32)

INSTALL(TARGETS qca-pkcs11 LIBRARY DESTINATION ${qca_PLUGINSDIR})
